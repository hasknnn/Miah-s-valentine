<!DOCTYPE html>
<html>
<head>
    <title>For My Miah ü§ç</title>
    <style>
        html {
            font-size: 16px;
        }

        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
        }

        @media (min-width: 1200px) {
            html {
                font-size: 18px;
            }
        }

        :root {
            --lavender: #957dad;
            --redish: #ff6b6b;
            --dark-bg: #6d527d;
            --dark-grey: #2c3e50;
            --soft-grey: #34495e;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #1a1a1a;
            font-family: 'Cormorant Garamond', serif;
            overflow: hidden;
        }

        .card-container {
            width: 90vw;
            height: calc(90vw * 1.777);
            max-height: 160vh;
            position: relative;
        }

        .front {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--lavender) 70%, var(--redish));
            border-radius: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.8s ease;
            top: -3%;
        }

        .title-container {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .for-my {
            font-weight: 700;
            font-size: 5rem;
            color: #e8daf2;
            margin-bottom: -15px;
            position: relative;
            top: 0px; 
            margin-left: 20px;
        }

        .miah-name {
            font-family: 'Dancing Script', cursive;
            font-size: 12rem;
            color: #e8daf2;
            line-height: 1;
            position: relative;
            top: -20px; 
            right: 2%;
        }

        .heart-symbol {
            color: #e8daf2;
            font-size: 9rem;
            margin-left: -20px;
        }

        .inside {
            position: absolute;
            width: 100%;
            height: 111%;
            background: var(--dark-bg);
            border-radius: 25px;
            padding: 0;
            display: none;
            color: white;
            flex-direction: column;
            align-items: center;
            top: -8%;
            right:-0.5%;
        }

        .message {
            flex: 1;
            overflow-y: auto;
            font-size: 1.29rem; /* Default font size */
            line-height: 1.6;
            padding: 2%;
            margin-top: 16%;
            transition: font-size 0.3s ease; /* Smooth transition for font size changes */
        }

        .size-control {
            position: absolute;
            bottom: 20px; /* Adjusted to the bottom */
            right: 20px; /* Adjusted to the right */
            z-index: 10;
            opacity: 0.5; /* Reduced opacity for subtlety */
        }

        .size-control input[type="range"] {
            width: 100px; /* Smaller width for compact placement */
            background: var(--lavender); /* Slider background matches lavender */
            accent-color: var(--lavender); /* Slider thumb color matches lavender */
        }

        .question-container {
            padding: 20px;
            text-align: center;
            position: relative;
            top: -2%;
        }

        button {
            padding: 18px 50px;
            margin: 12px;
            border: none;
            border-radius: 37.5px;
            font-family: inherit;
            font-size: 2.5rem;
            cursor: pointer;
            transition: 0.3s;
            top: -2%;
        }

        #yesBtn { 
            background: white;
            color: var(--lavender);
        }

        #noBtn { 
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .show-inside {
            display: flex;
            animation: fadeIn 0.8s;
        }

        .sticker {
            position: absolute;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Custom Modal Styles */
        .custom-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .custom-modal-content {
            background: linear-gradient(135deg, #b19cd9cc, #ff9a9ecc);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-family: 'Cormorant Garamond', serif;
            font-size: 4rem;
            font-weight: bold;
            color: #fff; /* White text for contrast */
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .custom-modal-content p {
            margin: 0;
        }

        @media (max-width: 768px) {
            .message {
                font-size: 1rem;
                margin-top: 15%;
            }
            .sticker.envelope img {
                width: 300px !important;
            }
            .sticker.butterfly img {
                width: 300px !important;
            }
            .click-text {
                font-size: 1.8rem !important;
                bottom: 15% !important;
            }
            .miah-name {
                font-size: 6rem;
            }
            .heart-symbol {
                font-size: 5rem;
            }
            .custom-modal-content {
                font-size: 2.5rem;
                padding: 20px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="card-container">
        <!-- Front Page -->
        <div class="front" onclick="revealCard()">
            <div class="title-container">
                <div class="for-my">for my</div>
                <div class="miah-name">Miah <span class="heart-symbol"><3</span></div>
            </div>
            <div class="sticker envelope" style="position: absolute; bottom: -3%; left: 50%; transform: translateX(-50%); z-index: 1;">
                <img src="https://i.imgur.com/v3SKcqc.png" alt="Envelope" style="width: 500px; height: auto;">
            </div>
            <p class="click-text" style="color: #8f1414; font-size: 2.5rem; position: absolute; bottom: 13%; left: 48%; transform: translateX(-50%) rotate(-14deg); z-index: 2;">click to open</p>
            <div class="sticker butterfly" style="position: absolute; bottom: 63%; right: 400px; transform: rotate(-70deg);">
                <img src="https://i.imgur.com/bmO6Dfp.png" alt="Blue Butterfly" style="width: 500px; height: auto;">
            </div>
            <div class="sticker white-hearts" style="position: absolute; top: 450px; left: 62%; transform: rotate(20deg);">
                <img src="https://i.imgur.com/jyro6b0.png" alt="White Hearts" style="width: 350px; height: auto;">
            </div>
        </div>

        <!-- Inside Page -->
        <div class="inside" id="insidePage">
            <div class="message" id="message">
                <p>Hey princess,</p>
                <p>Since the day I met you, I‚Äôve never been happier. You light up my whole life, and I feel like the luckiest man alive to call you mine. Even though we‚Äôre miles apart, every moment we‚Äôve shared, every call, every text, every memory has only made me more certain you‚Äôre the one I want to spend my forever with</p>
                <p>You‚Äôre my best friend, my confidant, and my greatest love. Words could never express how much you mean to me, but I hope you know you‚Äôre my everything, Miah. You‚Äôre my life, my heart, and my future ü§ç</p>
                <p>For Valentine's Day, let's celebrate us. How about a date night on FaceTime or watching a movie together?</p>
            </div>
            
            <div class="question-container">
                <p style="font-size: 3.7rem; margin: 0px 0;">Soo Miah, will you be my Valentine? ü§ç</p>
                <div class="sticker rose" style="position: absolute; bottom: 95px; left: 2%; transform: rotate(-40deg);">
                    <img src="https://i.imgur.com/Y8Bvp3c.png" alt="Rose" style="width: 200px; height: auto;">
                </div>
                <button id="yesBtn" onclick="handleYes()" style="padding: 30px 100px; font-size: 3rem;">Yes!</button>
                <button id="noBtn" onclick="handleNo()" style="padding: 30px 100px; font-size: 3rem;">No</button>
            </div>
            <div class="sticker teddy-bear" style="position: absolute; top: 1.5%; right: 25px; transform: rotate(0deg);">
                <img src="https://i.imgur.com/EPx85s3.png" alt="Cute Teddy Bear" style="width: 260px; height: auto;">
            </div>

            <!-- Font Size Control -->
            <div class="size-control">
                <input type="range" id="fontSize" min="0.8" max="2.6" step="0.1" value="1.29">
            </div>
        </div>
    </div>

    <!-- Custom Modal -->
    <div class="custom-modal" id="customModal" onclick="closeModal()">
        <div class="custom-modal-content">
            <p id="modalMessage"></p>
        </div>
    </div>

    <audio id="wooshSound" src="sounds/woosh.mp3"></audio>
    <audio id="clickSound" src="sounds/click.mp3"></audio>
    <audio id="confettiSound" src="sounds/confetti.mp3"></audio>

    <script>
        let attempts = 0;
        let clickedNo = false;
        const messages = [
            "Try again",
            "I don't think you mean it",
            "you mean YES!",
            "I can do this all day" // New response added here
        ];
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const wooshSound = document.getElementById('wooshSound');
        const clickSound = document.getElementById('clickSound');
        const customModal = document.getElementById('customModal');
        const modalMessage = document.getElementById('modalMessage');

        // Get the slider and message elements
        const fontSizeSlider = document.getElementById('fontSize');
        const messageElement = document.getElementById('message');

        // Retrieve the saved slider value from localStorage
        const savedFontSize = localStorage.getItem('fontSize');

        // If a saved value exists, set the slider and font size
        if (savedFontSize) {
            fontSizeSlider.value = savedFontSize;
            messageElement.style.fontSize = `${savedFontSize}rem`;
        }

        // Add event listener to save the slider value whenever it changes
        fontSizeSlider.addEventListener('input', function() {
            const fontSize = this.value;
            messageElement.style.fontSize = `${fontSize}rem`;
            localStorage.setItem('fontSize', fontSize); // Save to localStorage
        });

        function revealCard() {
            wooshSound.play();
            document.querySelector('.front').classList.add('fade-out');
            document.getElementById('insidePage').classList.add('show-inside');
        }

        function handleYes() {
            clickSound.play();
            confettiSound.play(); // Play confetti sound
            
            if (clickedNo) {
                modalMessage.textContent = "that's what I thought, dummy :)";
            } else {
                modalMessage.textContent = "yay, I love you, dummy <3";
            }
            customModal.style.display = "flex";
            disableButtons();

            confetti({
                particleCount: 1000,
                spread: 360,
                startVelocity: 45,
                origin: { y: 0.7 },
                gravity: 0.5,
                ticks: 300,
                shapes: ['circle', 'square'],
                colors: ['#ff6b6b', '#957dad', '#e8daf2', '#ffffff']
            });

            sendEmailNotification();
        }

        function handleNo() {
            clickSound.play();
            clickedNo = true;
            if (attempts < messages.length) {
                noBtn.textContent = messages[attempts]; // Cycle through the responses in order
                attempts++;
            }
            if (attempts >= messages.length) {
                yesBtn.textContent = "YES";
                noBtn.textContent = "YES";
                yesBtn.style.background = "white";
                noBtn.style.background = "white";
                yesBtn.style.color = "#957dad";
                noBtn.style.color = "#957dad";
                noBtn.onclick = handleYes;
            }
        }

        function closeModal() {
            customModal.style.display = "none";
        }

        function disableButtons() {
            yesBtn.onclick = null;
            noBtn.onclick = null;
        }

        function sendEmailNotification() {
            const emailData = {
                service_id: 'hasknnn',
                template_id: 'template_76e1i4q',
                user_id: 't41eWPqr8SBjkPRam',
                template_params: {
                    'username': 'Miah',
                    'message': 'Miah has clicked YES on your Valentine card!'
                }
            };

            fetch('https://api.emailjs.com/api/v1.0/email/send', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(emailData),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Email sent successfully:', data);
            })
            .catch(error => {
                console.error('Error sending email:', error);
            });
        }
    </script>
</body>
</html>
